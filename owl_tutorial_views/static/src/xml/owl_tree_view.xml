<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">

    <div t-name="owl_tutorial_views.OWLTreeRenderer" class="o_owl_tree_view" owl="1">
        <div class="d-flex p-2 flex-row">
            <div class="list-group" style="width:100%">
                <t t-foreach="props.data" t-as="item" t-key="item.id">
                    <ImpressionComponent data="item" />
                </t>
            </div>
        </div>
    </div>

    <div
        t-name="owl_tutorial_views.ImpressionComponent"
        class="o_impression_component"
        owl="1"
    >
        <div class="container-fluid">
            <div class="row ">
                <div class="col-3">
                    <span t-esc="state.data.data.encounter_id.data.display_name" />
                </div>
                <div class="col-3">
                    <span
                        t-esc="state.data.data.validation_user_id.data.display_name"
                        t-if="state.data.data.validation_user_id"
                    />
                </div>
                <div class="col-3">
                    <span
                        t-esc="timeFromNow"
                        t-if="state.data.data.validation_date"
                        t-att-title="datetime"
                    />
                </div>
                <div class="col-3">
                    <span t-esc="state.data.data.specialty_id.data.display_name" />
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <span
                        t-esc="state.data.data.summary"
                        t-if="state.data.data.summary &amp;&amp; !state.edit"
                    />
                    <textarea
                        t-esc="state.data.data.summary"
                        t-if="state.edit"
                        t-on-change="(ev) => this.onChange(ev, 'summary')"
                        t-att-value="state.data.data.summary || 'Please fill in with the summary of the impression...'"
                    />
                </div>
                <div class="col-4">
                <span
                        t-esc="state.data.data.note"
                        t-if="state.data.data.note &amp;&amp; !state.edit"
                    />
                <textarea
                        t-esc="state.data.data.note"
                        t-if="state.edit"
                        t-on-change="(ev) => this.onChange(ev, 'note')"
                        t-att-value="state.data.data.note || 'Please fill in with the note of the impression...'"
                    />
                </div>
                <div class="col-4">
                <span
                        t-esc="state.data.data.description"
                        t-if="state.data.data.description &amp;&amp; !state.edit"
                    />
                <textarea
                        t-esc="state.data.data.description"
                        t-if="state.edit"
                        t-on-change="(ev) => this.onChange(ev, 'description')"
                        t-att-value="state.data.data.description || 'Please fill in with the description of the impression...'"
                    />
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                <span>FINDINGS</span>
                </div>
                <div class="col-4">
                <span>ALERGIES</span>
                </div>
                <div class="col-4">
                    <button
                        class="btn btn-primary"
                        t-on-click="onEdit"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; !state.edit"
                    >
                        <i class="fas fa-edit" />
                    </button>

                    <button
                        class="btn btn-primary"
                        t-on-click="onSave"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; state.edit"
                    >
                        <i class="fas fa-save" />
                    </button>

                    <button
                        class="btn btn-primary"
                        t-on-click="onValidate"
                        t-if="state.data.data.fhir_state == 'in_progress'"
                    >
                        <i class="fas fa-check" />
                    </button>

                    <button
                        class="btn btn-secondary"
                        t-if="state.data.data.fhir_state == 'in_progress'"
                    >
                        <i class="fas fa-times" />
                    </button>
                </div>

            </div>
        </div>
    </div>
</templates>

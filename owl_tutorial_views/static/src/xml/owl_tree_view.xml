<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <div t-name="owl_tutorial_views.OWLTreeRenderer" class="o_owl_tree_view" owl="1">
        <div class="container mt-4">
            <t t-foreach="props.data" t-as="item" t-key="item.id">
                <div class="row">
                    <div class="col">
                        <ImpressionComponent data="item" />
                    </div>
                </div>
            </t>
        </div>
    </div>
    <t
        t-name="owl_tree.ControlPanel"
        t-inherit="web.ControlPanel"
        t-inherit-mode="primary"
        owl="1"
    >
        <xpath expr="//div[hasclass('o_control_panel')]" position="inside">
            <div class="row">
<<<<<<< HEAD
<<<<<<< HEAD
            <div class="col-3">
            <span t-esc="info.name" />
=======
            <div class="col-1">
            <span t-esc="info.name" />
<<<<<<< HEAD
>>>>>>> d5d4f7583cbd825a842167b65ea4fa5e07a159bb
=======
            <div class="col-1">
            <span t-esc="info.name" />
<<<<<<< HEAD
>>>>>>> d5d4f7583cbd825a842167b65ea4fa5e07a159bb
            </div>
            <div class="col-1">
            <span t-esc="info.gender" />
            </div>
            <div class="col-1">
            <span t-esc="info.patient_age" />
            </div>
            </div>
<<<<<<< HEAD
<<<<<<< HEAD
=======
=======
>>>>>>> d5d4f7583cbd825a842167b65ea4fa5e07a159bb
=======

                <div t-if="condition_count!=0">
                    <div class="alert alert-danger" role="alert">
                        <t t-foreach="info.condition_names" t-as="item" t-key="item.id">
                            <div class="row">
                                    <span t-esc="item" />

                            </div>
                        </t>
                    </div>
                </div>
>>>>>>> 9e58390 ([IMP] add blque rojo warning y lista conditions)
<<<<<<< HEAD
>>>>>>> d5d4f7583cbd825a842167b65ea4fa5e07a159bb
=======
>>>>>>> d5d4f7583cbd825a842167b65ea4fa5e07a159bb
        </xpath>
    </t>
    <div
        t-name="owl_tutorial_views.ImpressionComponent"
        class="o_impression_component mb-3"
        owl="1"
    >
        <div class="container-fluid">
            <div class="row style-header pt-1 pb-1">
                <div class="col-3">
                    <span t-esc="state.data.data.encounter_id.data.display_name" />
                </div>
                <div class="col-3">
                    <span
                        t-esc="state.data.data.validation_user_id.data.display_name"
                        t-if="state.data.data.validation_user_id"
                    />
                </div>
                <div class="col-2">
                    <span
                        t-esc="timeFromNow"
                        t-if="state.data.data.validation_date"
                        t-att-title="datetime"
                    />
                </div>
                <div class="col-2">
                    <span t-esc="state.data.data.specialty_id.data.display_name" />
                </div>

                <div class="col-2 d-flex justify-content-end">
                    <button
                        class="btn btn-primary"
                        t-on-click="onValidate"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; !state.edit"
                    >
                        <i class="fas fa-check" />
                    </button>

                    <button class="btn btn-primary" t-on-click="onCancel">
                        <i class="fas fa-times" />
                    </button>
                </div>
            </div>
            <div class="row row-text pt-3 pb-3">
                <div class="col-12 border-bottom-custom pb-3">
                    <i t-if="state.data.data.summary || state.edit">Summary: </i>
                    <span
                        t-esc="state.data.data.summary"
                        t-if="state.data.data.summary &amp;&amp; !state.edit"
                    />
                    <FieldAdapter
                        Component="FieldChar"
                        widgetArgs="['summary', state.data, {mode: 'edit', viewType: 'owl_tree', attrs: {}}]"
                        t-if="state.edit"
                    />
                </div>
                <div class="col-6 pt-3">
                <i t-if="state.data.data.description || state.edit">Description: </i>
                <span
                        t-esc="state.data.data.description"
                        t-if="state.data.data.description &amp;&amp; !state.edit"
                    />
                    <FieldAdapter
                        Component="FieldText"
                        widgetArgs="['description', state.data, {mode: 'edit', viewType: 'owl_tree', attrs: {}}]"
                        t-if="state.edit"
                    />

                </div>
                <div class="col-6 pt-3">
                <i t-if="state.data.data.note || state.edit">Notes: </i>
                <span
                        t-esc="state.data.data.note"
                        t-if="state.data.data.note &amp;&amp; !state.edit"
                    />
                    <FieldAdapter
                        Component="FieldText"
                        widgetArgs="['note', state.data, {mode: 'edit', viewType: 'owl_tree', attrs: {}}]"
                        t-if="state.edit"
                    />
                </div>
            </div>
            <div class="row pt-2 pb-2">
                <div class="col-5">
                    <FieldAdapter
                        Component="FieldMany2ManyTags"
                        widgetArgs="['finding_ids', state.data, {mode: 'readonly'}]"
                        t-if="!state.edit"
                    />
                    <FieldAdapter
                        Component="FieldMany2ManyTags"
                        widgetArgs="['finding_ids', state.data, {mode: 'edit', viewType: 'owl_tree', attrs: {}}]"
                        t-if="state.edit"
                    />
                </div>
                <div class="col-5">
                    <FieldAdapter
                        Component="FieldMany2ManyTags"
                        widgetArgs="['allergy_substance_ids', state.data, {mode: 'readonly'}]"
                        t-if="!state.edit"
                    />
                    <FieldAdapter
                        Component="FieldMany2ManyTags"
                        widgetArgs="['allergy_substance_ids', state.data, {mode: 'edit', viewType: 'owl_tree', attrs: {}}]"
                        t-if="state.edit"
                    />
                </div>
                <div class="col-2 d-flex justify-content-end">
                    <button
                        class="btn btn-primary"
                        t-on-click="onEdit"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; !state.edit"
                    >
                        <i class="fas fa-edit" />
                    </button>

                    <button
                        class="btn btn-primary"
                        t-on-click="onSave"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; state.edit"
                    >
                        <i class="fas fa-save" />
                    </button>

                      <button
                        class="btn btn-secondary"
                        t-on-click="onDeleteChanges"
                        t-if="state.data.data.fhir_state == 'in_progress' &amp;&amp; state.edit"
                    >
                        <i class="fas fa-trash" />
                    </button>
                </div>

            </div>
        </div>
    </div>

    <t t-name="OwlTreeView.buttons">
        <div class="o_owltree_buttons" role="toolbar" aria-label="Main actions">
            <button
                type="button"
                class="btn btn-primary o_owltree_button_add"
                accesskey="c"
            >
                Create
            </button>

        </div>
    </t>

</templates>
